<div class="shelf-group">
  <div class="shelf" ng-class="{disabled: disabled || !supportMark(channelId, mark), 'any': isAnyChannel}">
    <div class="shelf-label" ng-class="{expanded: propsExpanded}">{{ isAnyChannel ? 'any' : lang || channelId }}</div>
    <div class="field-drop" ng-model="pills[channelId]" data-drop="!disabled && supportMark(channelId, mark)"
      jqyoui-droppable="{onDrop:'fieldDropped'}" data-jqyoui-options="{activeClass: 'drop-active'}">
      <field-info ng-show="encoding[channelId].field" ng-class="{ expanded: funcsExpanded, any: isAnyField || isAnyFunction, 'enumerated-field': isEnumeratedField, 'enumerated-channel': isEnumeratedChannel, highlighted: isHighlighted(channelId) }"
        field-def="encoding[channelId]" show-type="true" show-caret="true" show-enum-spec-fn="true" disable-caret="encoding[channelId].aggregate==='count' || !hasFunctions"
        popup-content="fieldInfoPopupContent" show-remove="true" remove-action="removeField()" class="selected draggable full-width"
        data-drag="true" ng-model="pills[channelId]" jqyoui-draggable="{onStart: 'fieldDragStart', onStop:'fieldDragStop'}"
        data-jqyoui-options="{revert: 'invalid', helper: 'clone'}"></field-info><span class="placeholder" ng-if="!encoding[channelId].field">拖动左侧字段到此处</span></div>
  </div>
  <div class="drop-container">
    <div class="popup-menu shelf-properties shelf-properties-{{channelId}}" ng-show="false"></div>
    <div class="popup-menu shelf-functions shelf-functions-{{channelId}}" ng-hide="!hasFunctions">
      <function-select ng-if="!preview" field-def="encoding[channelId]" channel-id="channelId" support-any="supportAny && consts.wildcardFn"></function-select>
    </div>
  </div>
</div>