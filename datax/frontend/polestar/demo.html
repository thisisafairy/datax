{% extends 'base.html' %}
{% load staticfiles %}
{% block title %}预览{% endblock %}


{% block content %}
    <!-- <link rel="stylesheet" href="{% static 'bower_components/vega-tooltip/src/vg-tooltip.css'  %}" /> -->

<div id="vis" style="width:100%;height:100%"></div>

<!-- <script src="{% static 'bower_components/datalib/datalib.js' %}"></script>
<script src="{% static 'bower_components/d3/d3.js' %}"></script>
<script src="{% static 'bower_components/vega/vega.js' %}"></script>
<script src="{% static 'bower_components/vega-lite/vega-lite.js' %}"></script>
<script src="{% static 'bower_components/vega-tooltip/src/vg-tooltip.js' %}"></script>
<script src="{% static 'bower_components/vega-embed/vega-embed.js' %}"></script> -->

  <script>
  // Assign the specification to a local variable vlSpec.
  var vlSpec = {
      "width":500,
      "height":500,
      "data": {
        "values": [
          {"a": "A","b": 28}, {"a": "B","b": 55}, {"a": "C","b": 43},
          {"a": "D","b": 91}, {"a": "E","b": 81}, {"a": "F","b": 53},
          {"a": "G","b": 19}, {"a": "H","b": 87}, {"a": "I","b": 52}
        ]
      },
      "mark": "bar",
      "encoding": {
        "x": {"field": "a", "type": "ordinal"},
        "y": {"field": "b", "type": "quantitative"}
      }
  };
  vlSpec.width=400;
  vlSpec.height = 400;
  /*!vlSpec.config?vlSpec.config={}:"";
  vg.util.extend(vlSpec.config, {
      "autoResize":true
      });*/
  //var vgSpec = vl.compile(vlSpec).spec;
  //var text = JSON3.stringify(vgSpec, null, 2, 60);
  var embedSpec = {
        actions:false,
        mode: "vega-lite",  // Instruct Vega-Embed to use the Vega-Lite compiler
        spec: vlSpec
    // You can add more vega-embed configuration properties here.
    // See https://github.com/vega/vega/wiki/Embed-Vega-Web-Components#configuration-propeties for more information.
  };
  // Embed the visualization in the container with id `vis`
  vg.embed("#vis", embedSpec, function(error, result) {
    // Callback receiving the View instance and parsed Vega spec
    // result.view is the View, which resides under the '#vis' element
  });
  </script>
{% endblock %}
