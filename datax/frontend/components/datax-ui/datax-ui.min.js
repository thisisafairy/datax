(function(){"use strict";angular.module("dataxUI",["dataxUtils"]).directive("dxIcon",function(){return{restrict:"A",replace:!0,scope:{type:"@"},template:'<i ng-class="iconCls"></i>',link:function(scope){scope.iconCls={},scope.iconCls.icon=!0,scope.iconCls["dx-font"]=!0,scope.iconCls["dx-"+scope.type]=!0}}}).directive("dxRow",["dom",function(dom){return{restrict:"AE",replace:!0,scope:{gutter:"@"},transclude:!0,template:'<div ng-class="rowCls" ng-style="rowStyle" ng-transclude></div>',controller:function($scope,$element){},link:function(scope,element,attrs,ctrl){attrs.$observe("gutter",function(e){ctrl.gutter=parseInt(scope.gutter||0),angular.isNumber(ctrl.gutter)&&(ctrl.gutter=parseInt(scope.gutter||0),0==ctrl.gutter?scope.rowStyle={}:scope.rowStyle={marginLeft:ctrl.gutter/2+"px",marginRight:ctrl.gutter/2+"px"})}),scope.updateCls=function(){scope.rowCls={},scope.rowCls["dx-row"]=!0},scope.updateCls()}}}]).directive("dxCol",["dom",function(dom){return{restrict:"AE",replace:!0,require:"^^dxRow",scope:{span:"@",offsetXs:"@",offsetSm:"@",offsetMd:"@",offsetLg:"@",offsetXl:"@",offsetXll:"@",xs:"@",sm:"@",md:"@",lg:"@",xl:"@",xxl:"@",empty:"@"},transclude:!0,template:'<div ng-class="colCls" ng-style="colStyle" ng-transclude></div>',controller:function($scope,$element){},link:function(scope,element,attrs,ctrl){var vm=scope;scope.rowCtrl=ctrl,scope.prefixCls="dx-col",scope.$watch("rowCtrl.gutter",function(e){scope.colStyle=0==e?{}:{paddingLeft:ctrl.gutter/2+"px",paddingRight:ctrl.gutter/2+"px"}}),scope.validateAttr=function(e){return null!=e&&null!=e&&NaN!=parseInt(e)},scope.validateAttr(vm.xs)||(vm.xs=24),scope.validateAttr(vm.sm)||(vm.sm=6),scope.updateCls=function(){scope.colCls={},scope.colCls[scope.prefixCls]=!0,scope.colCls[scope.prefixCls+"-span-"+vm.span]=scope.validateAttr(vm.span),scope.colCls[scope.prefixCls+"-xs-offset-"+vm.offsetXs]=scope.validateAttr(vm.offsetXs),scope.colCls[scope.prefixCls+"-sm-offset-"+vm.offsetSm]=scope.validateAttr(vm.offsetSm),scope.colCls[scope.prefixCls+"-md-offset-"+vm.offsetMd]=scope.validateAttr(vm.offsetMd),scope.colCls[scope.prefixCls+"-lg-offset-"+vm.offsetLg]=scope.validateAttr(vm.offsetLg),scope.colCls[scope.prefixCls+"-xl-offset-"+vm.offsetXl]=scope.validateAttr(vm.offsetXl),scope.colCls[scope.prefixCls+"-xll-offset-"+vm.offsetXll]=scope.validateAttr(vm.offsetXll),scope.colCls[scope.prefixCls+"-xs-"+vm.xs]=scope.validateAttr(vm.xs),scope.colCls[scope.prefixCls+"-sm-"+vm.sm]=scope.validateAttr(vm.sm),scope.colCls[scope.prefixCls+"-md-"+vm.md]=scope.validateAttr(vm.md),scope.colCls[scope.prefixCls+"-lg-"+vm.lg]=scope.validateAttr(vm.lg),scope.colCls[scope.prefixCls+"-xl-"+vm.xl]=scope.validateAttr(vm.xl),scope.colCls[scope.prefixCls+"-xxl-"+vm.xxl]=scope.validateAttr(vm.xxl),scope.colCls[scope.prefixCls+"-empty"]=scope.empty},scope.updateCls()}}}]).directive("dxRadio",function(){return{restrict:"AE",replace:!0,transclude:!0,scope:{defaultchecked:"@",value:"@"},template:'<label class="datax-radio-wrapper">                    <span class="datax-radio {{radioClass}}">                        <input type="radio" value="{{value}}" class="datax-radio-input" ng-model="$parent.$parent.dxModel" >\t\t\t\t\t\t<span class="datax-radio-inner"></span>\t\t\t\t\t</span>\t\t\t\t\t<span ng-transclude></span>\t\t\t\t </label>',link:function(scope,element,attrs){scope.$watch("$parent.$parent.dxModel",function(e){e==scope.value?scope.radioClass="datax-radio-checked":scope.radioClass=""})}}}).directive("dxRadioGroup",function(){return{restrict:"AE",replace:!0,transclude:!0,scope:{defaultvalue:"@",dxModel:"=?",dxChange:"&"},template:'<div class="datax-radio-group" ng-transclude></div>',link:function(scope){scope.defaultvalue&&(scope.dxModel=scope.defaultvalue)}}}).constant("btnSize",{small:"sm",large:"lg"}).directive("dxButton",["$timeout","btnSize",function($timeout,e){return{restrict:"AE",transclude:!0,replace:!0,scope:{type:"@",click:"&",htmltype:"@",disabled:"@",icon:"@",shape:"@",size:"@",loading:"@",ghost:"=",style:"@"},template:'<button ng-click="clickBtn()" style="{{ style }}" ng-class="btnCls" type="{{htmltype}}">\t\t\t\t\t<i ng-class="iconCls" ng-if="!loading && icon"></i>\t\t\t\t\t<span ng-transclude ng-if="shape==\'circle\'?false:true"></span>\t\t\t\t</button>',link:function(scope,element,attrs){function t(){scope.btnCls={},scope.btnCls[a]=!0,scope.btnCls[a+"-"+scope.type]=scope.type,scope.btnCls[a+"-"+e[scope.size]]=scope.size,scope.btnCls[a+"-"+scope.shape]=scope.shape,scope.btnCls[a+"-background-ghost"]=scope.ghost}var a="datax-btn";scope.iconCls="icon dx-font dx-"+scope.icon,scope.elAttr=attrs,scope.clickBtn=function(){scope.click&&scope.click()},scope.$watchCollection("elAttr",function(e,a){t()})}}}]).directive("dxButtonGroup",["btnSize",function(e){return{restrict:"AE",replace:!0,transclude:!0,scope:{size:"@"},template:'<div ng-class="btnGroupCls" ng-transclude></div>',link:function(scope,element,attrs){function t(){scope.btnGroupCls={},scope.btnGroupCls[a]=!0,scope.btnGroupCls[a+"-"+e[scope.size]]=scope.size}var a="datax-btn-group";scope.$watch("size",function(){t()})}}}]).directive("dxCheckbox",["$document",function($document){return{restrict:"E",replace:!0,transclude:!0,scope:{checked:"=?",disabled:"=?disabled",dxChange:"&"},template:'<label class="datax-checkbox-wrapper">                                <span class="datax-checkbox {{checkClass}} {{disabledClass}}">                                    <input type="checkbox" ng-model="checked" class="datax-checkbox-input" ng-disabled="disabled">                                    <span class="datax-checkbox-inner"></span>                                </span>                                <span ng-transclude></span>                            </label>',link:function(scope,element){scope.$watch("checked",function(e){scope.dxChange&&scope.dxChange(),scope.checkClass=e?"datax-checkbox-checked":""}),scope.$watch("disabled",function(e){e?(scope.disabledClass="datax-checkbox-disabled",scope.disabled=!0):(scope.disabledClass="",scope.disabled=!1)})}}}]).directive("dxSelect",["dom",function(dom){return{restrict:"E",scope:{items:"=?items",dxValue:"=?dxValue",dxLabel:"=?dxLabel",dxModel:"=dxModel",dxGroup:"=?dxGroup",remote:"=?remote",multiple:"=?multiple",dxPlaceholder:"=?dxPlaceholder",dxChange:"&",dxClass:"=?dxClass",dxStyle:"=?dxStyle",theme:"=?theme"},template:'<div class="datax-select datax-select-enabled datax-select-allow-clear {{ className }}">                                 <div class="datax-select-selection datax-select-selection--single" hidefocus="true" tabindex="0">                                     <div class="datax-select-selection__rendered" ng-click="openDropdown()">                                        <div class="datax-select-selection__placeholder" ng-show="dxPlaceholder && selectLabel.length==0">{{ dxPlaceholder }}</div>                                        <div class="datax-select-selection-selected-value">{{ selectLabel }}</div>                                    </div>                                    <div class="datax-select-selection__clear" ng-click="delSelect()">                                    <i dx-icon class="datax-select-close-icon" type="close-circle"></i></div>                                    <div class="datax-select-arrow"><i class="icon dx-font dx-down datax-select-arrow-icon"></i></div>                                </div>                            </div>',controller:function($scope,$element,$compile,$timeout){if(isNull($scope.dxModel))if($scope.multiple){if(null!=$scope.dxModel&&null!=$scope.dxModel&&""!=$scope.dxModel&&0!=Object.keys($scope.dxModel).length)return void console.log("warning ! in multiple select, dx-model must be array type");$scope.dxModel=[]}else $scope.dxModel="";var vm=$scope;vm.groupSelect=!1,vm.list=[],vm.selectLabel="";var e=null;vm.openDropdown=function(){e=$compile(angular.element('                        <div class="cdk-overlay-pane">                            <div class="datax-select-dropdown" style="opacity: 1; transform: scaleY(1); transform-origin: 0% 0%;">                                <div class="ng-tns-c0-36" style="overflow: auto;transform: translateZ(0px);">                                    <ul ng-show="!dxGroup" class="datax-select-dropdown-menu                                         datax-select-dropdown-menu-root datax-select-dropdown-menu-vertical">                                        <li class="datax-select-dropdown-menu-item" ng-repeat="item in list"                                             ng-class="{\'datax-select-dropdown-menu-item-active\':item[\'checked\']}"                                             ng-click="checkItem($event, item)">{{ item.label }}                                             <i ng-show="multiple && item[\'checked\']" class="icon dx-font dx-check datax-select-selected-icon"></i></li>                                    </ul>                                    <ul ng-show="dxGroup" class="datax-select-dropdown-menu                                         datax-select-dropdown-menu-root datax-select-dropdown-menu-vertical">                                        <li class="datax-select-dropdown-menu-item-group" ng-repeat="item in list" >                                             <div class="datax-select-dropdown-menu-item-group-title">{{ item.group }}</div>                                            <ul class="datax-select-dropdown-menu-item-group-list">                                                <li ng-repeat="child in item.children" ng-click="checkItem($event, child)"                                                    class="datax-select-dropdown-menu-item"                                                    ng-class="{\'datax-select-dropdown-menu-item-active\':child[\'checked\']}">                                                    {{ child.label }}                                                    <i ng-show="multiple && child[\'checked\']" dx-icon class="datax-select-selected-icon" type="check"></i>                                                </li>                                            </ul>                                            </li>                                    </ul>                                </div>                            </div>                        </div>'))($scope),dom.openOverlayBackdrop({},[e]);var t=dom.offset($element[0].querySelector(".datax-select"));e[0].style.top=t.top+t.offsetHeight+"px",e[0].style.left=t.left+"px",e[0].style.width=t.offsetWidth+"px",e[0].style.maxHeight="200px",getByEle(document.body).append(e),getByClass("datax-select-dropdown").css("position","relative").css("width","100%").css("margin-top","4px").css("margin-bottom","4px").css("top","0").css("left","0"),$element[0].querySelector(".datax-select-selection").focus(),$timeout(function(){vm.disabledWatchModel=!1})},vm.delSelect=function(){vm.selectLabel="",clearChecked(vm.list),$timeout(function(){$scope.dxChange&&$scope.dxChange()})},vm.checkItem=function(e,t){vm.disabledWatchModel=!0,t.checked?vm.multiple&&(t.checked=!1):(vm.multiple||clearChecked(vm.list),t.checked=!0),vm.setModel(t)},vm.setModel=function(e){vm.multiple?(vm.dxModel=[],vm.selectLabel="",vm.list.forEach(function(e){e.children?e.children.forEach(function(e){e.checked&&(vm.dxModel.push(e.value),vm.selectLabel+=e.label+",")}):e.checked&&(vm.dxModel.push(e.value),vm.selectLabel+=e.label+",")}),vm.selectLabel=subStrEnd(vm.selectLabel),$element[0].querySelector(".datax-select-selection").focus()):(vm.removeDropdownDom(),vm.dxModel=e.value,vm.selectLabel=e.label),$timeout(function(){$scope.dxChange&&$scope.dxChange(),vm.disabledWatchModel=!1})},vm.removeDropdownDom=function(){e&&e.remove();var t=document.body.querySelector(".datax-overlay-backdrop");t&&t.remove()},vm.initSelectObj=function(e,t){var a={};return"object"==typeof e?(vm.dxLabel?a.label=e[vm.dxLabel]:console.log("if items is object array, attribute 'dx-label' must be require"),vm.dxValue?a.value=e[vm.dxValue]:a.value=e):(a.value=e,a.label=e),a.uniqueKey=t,a.checked=!1,a.disabled=!1,a.hide=!1,a},vm.updateLabelByModel=function(){isNotNull(vm.dxModel)&&(vm.selectLabel="",vm.list.forEach(function(e){vm.dxGroup&&e.children?e.children.forEach(function(e){vm.multiple?vm.dxModel.forEach(function(t){t+""==e.value+""&&(e.checked=!0,vm.selectLabel+=e.label+",")}):vm.dxModel+""==e.value+""&&(e.checked=!0,vm.selectLabel+=e.label)}):vm.multiple?vm.dxModel.forEach(function(t){t+""==e.value+""&&(e.checked=!0,vm.selectLabel+=e.label+",")}):vm.dxModel+""==e.value+""&&(e.checked=!0,vm.selectLabel+=e.label)}),vm.multiple&&(vm.selectLabel=subStrEnd(vm.selectLabel)))},$scope.$watch("dxModel",function(e){isNotNull(e)&&!vm.disabledWatchModel&&vm.updateLabelByModel()},!0),$scope.$watch("items",function(e){if(isNotNull(e)&&!$scope.remote){if(vm.disabledWatchModel=!0,vm.dxGroup){vm.list=[];var t=0,a=_.groupBy(vm.items,vm.dxGroup);_.forEach(a,function(e,a){var l=e.map(function(e,a){return vm.initSelectObj(e,1e4*t+a)});vm.list.push({group:a,children:l}),t+=1})}else vm.list=e.map(function(e,t){return vm.initSelectObj(e,t)});vm.updateLabelByModel(),$timeout(function(){vm.disabledWatchModel=!1})}})}}}]).directive("dxTransfer",function(){return{template:'<div class="datax-transfer transfer-full-content {{ componentStyle }}" ng-class="contentClass">                <div class="datax-transfer-content">                    <div class="datax-transfer-left datax-transfer-list">                        <div class="datax-transfer-list-header">                            <dx-checkbox checked="checkAllLeft">{{list.length}} 项</dx-checkbox>                            <span class="datax-transfer-list-header-title">                                {{ sourceTitle }}                            </span>                        </div>                        <div class="datax-transfer-list-body">                            <ul class="datax-transfer-list-content">                                <li class="datax-transfer-list-content-item" ng-repeat="item in list">                                    <dx-checkbox checked="item.checked" change="selectChange()" disabled="item.disabled">{{item[dxLabel]}}</dx-checkbox>                                </li>                            </ul>                        </div>                    </div>                    <div class="datax-transfer-operation">                        <button dx-button type="primary" icon="left" size="small" disabled role="\'left\'" click="toLeft();"></button>                        <button dx-button type="primary" icon="right" size="small" disabled role="\'right\'" click="toRight();"></button>                    </div>                    <div class="datax-transfer-right datax-transfer-list">                        <div class="datax-transfer-list-header">                            <dx-checkbox checked="checkAllRight">{{resultList.length}} 项</dx-checkbox>                            <span class="datax-transfer-list-header-title">                                {{ targetTitle }}                            </span>                        </div>                        <div class="datax-transfer-list-body">                            <ul class="datax-transfer-list-content">                                <li class="datax-transfer-list-content-item" ng-repeat="item in resultList">                                    <dx-checkbox checked="item.checked" change="selectChange()" disabled="item.disabled">{{item[dxLabel]}}</dx-checkbox>                                </li>                            </ul>                        </div>                    </div>                </div>            </div>',restrict:"E",scope:{items:"=",result:"=",change:"&",titles:"=?titles",dxLabel:"=?dxLabel",filter:"=?filter",componentStyle:"=?componentStyle"},controller:function($scope,$element){$scope.componentUuid=generateUuid(8,16),$scope.contentClass="transfer-"+$scope.componentUuid,$scope.sourceTitle="",$scope.targetTitle="",$scope.list=[],$scope.resultList=[],isNotNull($scope.titles)&&2==$scope.titles.length&&($scope.sourceTitle=$scope.titles[0],$scope.targetTitle=$scope.titles[1]),$scope.change||($scope.change=function(e){});var e=getByEle($element[0]).find("button")[1],t=getByEle($element[0]).find("button")[0];$scope.componentStyle&&0!==$scope.componentStyle.length?$scope.componentStyle="transfer-"+$scope.componentStyle:$scope.componentStyle="transfer-bootstrap",$scope.$watch("checkAllLeft",function(e){$scope.list.forEach(function(t){t.checked=!!e})}),$scope.$watch("checkAllRight",function(e){$scope.resultList.forEach(function(t){t.checked=!!e})}),$scope.toLeft=function(){$scope.resultList.forEach(function(e){if(e.checked&&!e.disabled){var t=angular.copy(e);t.checked=!1,e.delete=!0,$scope.list.unshift(t)}}),$scope.resultList=$scope.resultList.filter(function(e){return!e.delete}),$scope.change({ev:{form:"right",to:"left",left:$scope.list,right:$scope.resultList}})},$scope.toRight=function(){$scope.list.forEach(function(e){if(e.checked&&!e.disabled){var t=angular.copy(e);t.checked=!1,e.delete=!0,$scope.resultList.unshift(t)}}),$scope.list=$scope.list.filter(function(e){return!e.delete}),$scope.change({ev:{form:"left",to:"right",left:$scope.list,right:$scope.resultList}})},$scope.$watch("items",function(e){e&&e.length>0&&($scope.list=e.map(function(e,t){var a=e;return a.checked=!1,a.disabled=!1,a}))}),$scope.$watch("result",function(e){e&&e.length>0&&($scope.resultList=e.map(function(e,t){var a=e;return a.checked=!1,a.disabled=!1,a}))}),$scope.$watch("list",function(){var t=$scope.list.filter(function(e){return e.checked});t&&t.length>0?e.disabled="":e.disabled=!0},!0),$scope.$watch("resultList",function(){var e=$scope.resultList.filter(function(e){return e.checked});e&&e.length>0?t.disabled="":t.disabled=!0},!0)}}}).directive("dxTooltip",["dom","$compile","$document",function(dom,$compile,$document){return{restrict:"A",scope:{tooltipText:"@",tooltipTrigger:"=?tooltipTrigger",disableTooltip:"=?disableTooltip"},link:function(scope,element,attrs){function e(){scope.isOpen?t():(scope.offset=dom.offset(element[0]),angular.element(document.body).append(l),scope.tooltipOffset=dom.offset(l[0]),n=scope.offset.left-((scope.tooltipOffset.offsetWidth/2).toFixed(2)-(scope.offset.offsetWidth/2).toFixed(2)),d=scope.offset.top-scope.tooltipOffset.offsetHeight,l[0].style.left=n+"px",l[0].style.top=d+"px",scope.$digest(),"click"===scope.tooltipTrigger&&$document.on("click",a),scope.isOpen=!0)}function t(){l&&(l.remove(),scope.isOpen=!1,"click"===scope.tooltipTrigger&&$document.off("click",a))}function a(e){e.pageX>scope.offset.left&&e.pageX<scope.offset.left+scope.offset.offsetWidth&&e.pageY>scope.offset.top&&e.pageY<scope.offset.top+scope.offset.offsetHeight||e.pageX>n&&e.pageX<n+Number(scope.tooltipOffset.offsetWidth)&&e.pageY>d&&e.pageY<d+Number(scope.tooltipOffset.offsetHeight)||t()}var l,n=0,d=0;scope.$watch("tooltipText",function(a){var n='<div class="datax-tooltip"><div class="datax-tooltip-arrow"></div><div class="datax-tooltip-inner">'+nullToStr(scope.tooltipText)+"</div></div>";l=$compile(n)(scope),scope.disableTooltip||("click"===scope.tooltipTrigger?element.on("click",e):(element.on("mouseenter",e),element.on("mouseleave",t)))})}}}]).directive("dxDateRangePanel",["dxCalendar",function(e){return{restrict:"AE",replace:"true",scope:{panelType:"=?panelType",panelYear:"=?panelYear",panelMonth:"=?panelMonth",dxChange:"&"},template:'<div>                <div class="datax-calendar-month-panel" ng-show="panelType==\'year\'">                    <div>                        <diV class="datax-calendar-month-panel-header">                            <a role="button" class="datax-calendar-month-panel-prev-year-btn" ng-click="changePanelDate(\'year\', \'sub\')" title="上一年"></a>                            <a role="button" class="datax-calendar-month-panel-year-select" title="选择年份" ng-click="panelType=\'decade\'">                                <span class="datax-calendar-month-panel-year-select-content">{{ selectYear }}</span>                                <span class="datax-calendar-month-panel-year-select-arrow">x</span>                            </a>                            <a role="button" class="datax-calendar-month-panel-next-year-btn" ng-click="changePanelDate(\'year\', \'add\')" title="下一年"></a>                        </diV>                        <div class="datax-calendar-month-panel-body">                            <table cellspacing="0" role="grid" class="datax-calendar-month-panel-table">                                <tbody class="datax-calendar-month-panel-tbody">                                    <tr role="row" ng-repeat="item in monthOfYear">                                        <td role="gridcell" ng-repeat="mon in item"                                             ng-class="{\'datax-calendar-month-panel-selected-cell\':mon==panelMonth}"                                            class="datax-calendar-month-panel-cell" title="{{mon}}月">                                            <a class="datax-calendar-month-panel-month" ng-click="changeMonth(mon)">{{mon}}月</a>                                        </td>                                    </tr>                                </tbody>                            </table>                        </div>                    </div>                </div>                <div class="datax-calendar-year-panel" ng-show="panelType==\'decade\'">                    <div>                        <div class="datax-calendar-year-panel-header">                            <a role="button" class="datax-calendar-year-panel-prev-decade-btn" ng-click="changePanelDate(\'decade\', \'sub\')" title="上一年代"></a>                            <a role="button" class="datax-calendar-year-panel-decade-select">                                <span class="datax-calendar-year-panel-decade-select-content"> {{yearOfDecade[0][1].year}}-{{yearOfDecade[3][2].year}} </span>                                <span class="datax-calendar-year-panel-decade-select-arrow">x</span>                            </a>                            <a role="button" class="datax-calendar-year-panel-next-decade-btn" ng-click="changePanelDate(\'decade\', \'add\')" title="下一年代"></a>                        </div>                        <div class="datax-calendar-year-panel-body">                            <table cellspacing="0" role="grid" class="datax-calendar-year-panel-table">                                <tbody class="datax-calendar-year-panel-tbody">                                    <tr role="row" class="" ng-repeat="item in yearOfDecade">                                        <td role="gridcell" class="datax-calendar-year-panel-cell" ng-repeat="year in item"                                        title="{{ year.year }}" ng-class="{\'datax-calendar-year-panel-last-decade-cell\':year.last,                                            \'datax-calendar-year-panel-next-decade-cell\':year.next,\'datax-calendar-year-panel-selected-cell\':year.year==panelYear}">                                            <a class="datax-calendar-year-panel-year" ng-click="changeYear(year.year)">{{ year.year }}</a>                                        </td>                                    </tr>                                </tbody>                            </table>                        </div>                    </div>                </div>            </div>',controller:function($scope,$element){var vm=$scope;vm.panelType||(vm.panelType="month"),vm.monthOfYear=[[1,2,3],[4,5,6],[7,8,9],[10,11,12]],vm.yearOfDecade=e.yearsOfDecade(vm.panelYear),vm.selectYear=vm.panelYear;vm.panelYear;vm.changePanelDate=function(t,a){"year"==t?"add"==a?vm.selectYear+=1:"sub"==a&&(vm.selectYear-=1):"decade"==t&&("add"==a?vm.selectYear+=10:"sub"==a&&(vm.selectYear-=10),vm.yearOfDecade=e.yearsOfDecade(vm.selectYear))},vm.changeYear=function(e){vm.panelType="year",vm.selectYear=e},vm.changeMonth=function(e){vm.panelType="month",vm.dxChange({ev:{year:vm.selectYear,month:e}})}}}}]).directive("dxDateRangePopup",["dxCalendar",function(e){return{restrict:"AE",replace:"true",scope:{value:"=?value",selectedDate:"&"},template:'<div class="datax-calendar-picker-container datax-calendar-picker-container-placement-bottomLeft">                            <div class="datax-calendar">                                <div class="datax-calendar-panel">                                    <div class="datax-calendar-input-wrap">                                        <div class="datax-calendar-date-input-wrap">                                            <input class="datax-calendar-input" ng-model="tempDateStr" placeholder="请选择日期">                                        </div>                                    </div>                                    <div class="datax-calendar-date-panel">                                        <div class="datax-calendar-header">                                            <div style="position: relative;">                                                <a role="button" class="datax-calendar-prev-year-btn" ng-click="changeDate(\'lastYear\')" title="上一年"></a>                                                <a role="button" class="datax-calendar-prev-month-btn" ng-click="changeDate(\'lastMonth\')" title="上个月"></a>                                                <span class="datax-calendar-ym-select">                                                    <a role="button" class="datax-calendar-year-select" ng-click="panelType=\'decade\'" title="选择年份"> {{ panelYear }}年                                                    </a>                                                    <a role="button" class="datax-calendar-month-select" ng-click="panelType=\'year\'" title="选择月份"> {{ panelMonth }}月 </a>                                                </span>                                                <a role="button" class="datax-calendar-next-month-btn" ng-click="changeDate(\'nextMonth\')" title="下个月"></a>                                                <a role="button" class="datax-calendar-next-year-btn" ng-click="changeDate(\'nextYear\')" title="下一年"></a>                                            </div>                                            <dx-date-range-panel panel-type="panelType" panel-year="panelYear" panel-month="panelMonth" dx-change="selectYearOrMonth(ev)"></dx-date-range-panel>                                        </div>                                        <div class="datax-calendar-body">                                            <table cellspacing="0" role="grid" class="datax-calendar-table">                                                <thead>                                                    <tr role="row">                                                        <th role="columnheader" ng-repeat="week in weekTitle" title="{{ week.full }}"                                                            class="datax-calendar-column-header"><span                                                                class="datax-calendar-column-header-inner">{{ week.short }}</span></th>                                                    </tr>                                                </thead>                                                <tbody class="datax-calendar-tbody">                                                    <tr role="row" ng-repeat="week in days">                                                        <td role="gridcell" class="datax-calendar-cell" ng-repeat="day in week"                                                         ng-class="{ \'datax-calendar-last-month-cell\':day[0][\'isLastmonth\'],                                                        \'datax-calendar-next-month-btn-day\':day[0][\'isNextmonth\'],                                                         \'datax-calendar-today\': (day[0].day == now.day && day[0].month == now.month && day[0].year == now.year),                                                         \'datax-calendar-selected-day\': (day[0].day == selectDate.day && day[0].month == selectDate.month && day[0].year == selectDate.year)}" >                                                            <div class="datax-calendar-date" ng-click="selectDay(day[0])" aria-selected="false" aria-disabled="false">{{ day[0].day }}</div>                                                        </td>                                                    </tr>                                                </tbody>                                            </table>                                        </div>                                        <div class="datax-calendar-footer">                                            <span class="datax-calendar-footer-btn">                                                <a role="button" class="datax-calendar-today-btn" ng-click="today()">今天</a>                                            </span>                                        </div>                                    </div>                                </div>                            </div>                        </div>',controller:function($scope,$element){var vm=$scope;if(isNull(vm.value))vm.value=new Date;else{try{vm.value=new Date(vm.value)}catch(e){console.log("format date error, format is:",vm.value),vm.value=new Date}vm.tempDateStr=moment(vm.value).format("YYYY-MM-DD")}vm.selectMoment=moment(vm.value),vm.nowMoment=moment(new Date),vm.panelYear=vm.selectMoment.year(),vm.panelMonth=vm.selectMoment.month()+1,vm.weekTitle=weekTitle,vm.now={day:vm.nowMoment.date(),month:vm.nowMoment.month()+1,year:vm.nowMoment.year()},vm.selectDate={day:vm.selectMoment.date(),month:vm.selectMoment.month()+1,year:vm.selectMoment.year()},vm.days=e.daysOfMonth(vm.value),vm.selectDay=moment(vm.value),vm.selectMonth=vm.selectDay.month()+1,vm.panelType="month",vm.tempDate=moment(vm.value),vm.changeDate=function(t){"lastYear"==t?vm.tempDate=vm.tempDate.subtract(1,"year"):"lastMonth"==t?vm.tempDate=vm.tempDate.subtract(1,"month"):"nextYear"==t?vm.tempDate=vm.tempDate.add(1,"year"):"nextMonth"==t&&(vm.tempDate=vm.tempDate.add(1,"month")),vm.panelYear=vm.tempDate.year(),vm.panelMonth=vm.tempDate.month()+1,vm.days=e.daysOfMonth(vm.tempDate.toDate()),vm.tempDateStr=vm.tempDate.format("YYYY-MM-DD")},vm.selectYearOrMonth=function(e){vm.tempDate=moment(new Date(e.year+"-"+e.month+"-1")),vm.changeDate("")},vm.today=function(){vm.tempDate=moment(new Date),vm.changeDate(""),vm.selectedDate({ev:{day:{year:vm.tempDate.year(),month:vm.tempDate.month()+1,day:vm.tempDate.date()}}})},vm.selectDay=function(e){vm.selectedDate({ev:{day:e}})}}}}]).directive("dxDatePicker",["dom","dxCalendar",function(dom,e){return{restrict:"AE",replace:"true",scope:{dxModel:"=?dxModel",dxPlaceholder:"=?dxPlaceholder"},template:'<div class="datax-datepicker-wrapper">                        <span class="datax-calendar-picker" ng-click="openPopup()">                            <input readonly="" class="datax-calendar-picker-input datax-input" ng-model="dateStr" placeholder="{{dxPlaceholder}}">                            <i dx-icon type="close-circle" class="datax-calendar-picker-clear"></i>                            <i dx-icon type="calendar" class="datax-calendar-picker-icon"></i>                        </span>                    </div>',controller:function($scope,$element,$compile,$timeout){var vm=$scope;vm.dxPlaceholder||(vm.dxPlaceholder="请选择日期"),vm.forbidWatch=!1,vm.dateStr="";var e=null;vm.openPopup=function(){e=$compile(angular.element('<div class="cdk-overlay-pane"><dx-date-range-popup value="days" selected-date="selectDate(ev)"></dx-date-range-popup></div>'))($scope),dom.openOverlayBackdrop({},[e]);var t=dom.offset($element[0].querySelector(".datax-calendar-picker"));e[0].style.top=t.top+"px",e[0].style.left=t.left+"px",getByEle(document.body).append(e)},vm.selectDate=function(e){vm.forbidWatch=!0,vm.closeDropPanel(),vm.dxModel=new Date(e.day.year+"-"+e.day.month+"-"+e.day.day),
vm.days=new Date(e.day.year+"-"+e.day.month+"-"+e.day.day),vm.dateStr=moment(vm.dxModel).format("YYYY-MM-DD"),$timeout(function(){vm.forbidWatch=!1})},vm.closeDropPanel=function(){e.remove(),e=null;var t=document.body.querySelector(".datax-overlay-backdrop");t&&t.remove()},$scope.$watch("dxModel",function(e){vm.forbidWatch||(isNotNull(e)?(vm.days=new Date(e),vm.dateStr=moment(vm.days).format("YYYY-MM-DD")):vm.days=null)})},link:function(scope,element,attrs){}}}]).directive("dxCellEdit",["dom",function(dom){return{restrict:"AE",replace:!0,scope:{tableData:"=",rowIndex:"=",colIndex:"=",colName:"=",dxStyle:"=",editable:"=?editable",afterValueChange:"&"},template:'<div class="edit-id-{{uid}}">                    <div dx-tooltip tooltip-text="{{ tableData[rowIndex][colName] | formatText:dxStyle[\'format\'] }}" tooltip-trigger="triggerType" disable-tooltip="disableTooltip" ng-show="!editId"                        ng-style="dxStyle" ng-click="startEdit()" class="datax-table-cell datax-table-cell-text text-not-wrap edit-id-{{uid}}">                        {{ tableData[rowIndex][colName] | formatText:dxStyle[\'format\'] }}                    </div>                    <div ng-style="dxStyle" class="datax-table-cell-input-wrapper edit-id-{{uid}} " ng-show="editId">                        <input type="text" ng-model="tableData[rowIndex][colName]" class="datax-table-cell-input edit-id-{{uid}}">                    </div>                </div>',controller:function($scope,$document,$element,$timeout){function e(t){var a=t.target.className;a.indexOf("edit-id-"+vm.uid)>=0||(vm.tempValue!=vm.tableData[vm.rowIndex][vm.colName]&&$scope.afterValueChange(),$document.off("click",e),$scope.editId=null,$scope.$apply())}var vm=$scope;$scope.afterValueChange||($scope.afterValueChange=function(){}),$scope.editId=null,isMobileDevice()?vm.triggerType="click":vm.triggerType="hover",vm.editable?(isMobileDevice()?vm.disableTooltip=!0:vm.disableTooltip=!1,vm.uid=generateUuid(8,16)):(vm.uid=0,vm.disableTooltip=!1),vm.dxStyle.disableTooltip&&(vm.disableTooltip=!0),vm.initComponentValues=function(){vm.cellObj=vm.tableData[vm.rowIndex],vm.cellValve=vm.cellObj[vm.colName],vm.tempValue=vm.cellValve+""},vm.initComponentValues(),vm.startEdit=function(){vm.editable&&(vm.initComponentValues(),$scope.editId=vm.cellValve+"",$document.on("click",e),$element[0].querySelector(".datax-table-cell-input").style.display="block",$timeout(function(){$element[0].querySelector(".datax-table-cell-input").style.display="block",$element[0].querySelector(".datax-table-cell-input").focus()},100))}}}}]).directive("dxTable",function(){return{templateUrl:"/frontend/components/datax-ui/table.html",restrict:"E",scope:{columns:"=",data:"=",total:"=?total",height:"=",rowHeight:"=?rowHeight",showPager:"=?showPager",fullFix:"=?fullFix",tableStyle:"=?tableStyle",componentTheme:"=?componentTheme",customConfig:"=?customConfig",refreshStyle:"&"},controller:function($scope,$element,$http,$timeout){var vm=$scope;vm.isAndroid=navigator.userAgent.indexOf("Android")>-1||navigator.userAgent.indexOf("Adr")>-1,vm.isiOS=!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),vm.componentUuid=generateUuid(8,16),vm.limit=vm.data.length,vm.heads=[],vm.scrollHeight=0,vm.unitHeight=35,vm.columnsStyle=[],isNotNull(vm.componentTheme),vm.customCode="",vm.customConfig&&vm.customConfig.editable?(isNotNull(vm.customConfig.customAfterchangeCode)&&(vm.customCode=vm.customConfig.customAfterchangeCode),vm.editable=!0):vm.editable=!1,vm.afterCellEdit=function(){eval(vm.customCode)},isNull(vm.tableStyle)&&(vm.tableStyle={wrapper:{},scroll:{header:{paddingBottom:"0px",table:{},row:{},td:{},cell:{}},body:{maxHeight:vm.scrollHeight,table:{},row:{},td:{},cell:{}}},fixedLeft:{header:{table:{},row:{},cell:{}},bodyOuter:{},bodyInner:{"max-height":vm.scrollHeight,table:{},row:{},cell:{}}}}),vm.fullFix&&(vm.tableStyle.scroll.body.overflowX="hidden"),vm.fixHeight=function(){vm.heads&&vm.heads.length<1?vm.scrollHeight=vm.height-vm.unitHeight:vm.scrollHeight=vm.height-vm.unitHeight*vm.heads.length,vm.tableStyle.scroll.body.maxHeight=vm.scrollHeight+"px",vm.tableStyle.fixedLeft.bodyInner.maxHeight=vm.scrollHeight+"px"},vm.fixRowHeight=function(){isNotNull(vm.rowHeight)&&vm.rowHeight>10?vm.unitHeight=vm.rowHeight:vm.unitHeight=35},vm.$watch("height",function(e){e&&e>0&&(vm.fixRowHeight(),vm.fixHeight())}),vm.$watch("columns",function(e){isNotNull(e)&&e.length>0&&(vm.fixRowHeight(),vm.fixHeight(),vm.fixedLeft=0,vm.fixedLeftWidth=0,vm.fixedRight=0,vm.fixedRightWidth=0,vm.heads=[],vm.rowInfo=[],e.forEach(function(t,a){vm.heads.push({rows:[]});var l=t.rows?t.rows:t;l.forEach(function(t,l){var n=t.width?t.width:100,d=t.colspan?t.colspan:"1";n*=d,a==e.length-1&&isNotNull(t.fixed)&&(vm.fixedLeft+=1,vm.fixedLeftWidth+=n);var c={rowspan:t.rowspan?t.rowspan:"1",colspan:d,title:t.title?t.title:"",field:t.field?t.field:"",width:n+"px",height:vm.unitHeight+"px",lineHeight:vm.unitHeight+"px",isedit:t.isedit?t.isedit:"0",format:t.format?t.format:"",disableTooltip:!!t.disableTooltip&&t.disableTooltip};vm.heads[a].rows.push(c),a==e.length-1&&vm.rowInfo.push(c)})}),vm.tableStyle.scroll.header.marginLeft=vm.fixedLeftWidth+"px",vm.tableStyle.scroll.body.marginLeft=vm.fixedLeftWidth+"px")},!0);var scrollObj=$element[0].querySelector(".datax-table-body"),leftObj=$element[0].querySelector(".datax-table-body-inner"),topObj=$element[0].querySelector(".datax-table-scroll-header"),currentTab=0;scrollObj.addEventListener("scroll",function(){1==currentTab&&(leftObj.scrollTop=scrollObj.scrollTop,topObj.scrollLeft=scrollObj.scrollLeft)}),leftObj.addEventListener("scroll",function(){2==currentTab&&(scrollObj.scrollTop=leftObj.scrollTop)}),topObj.addEventListener("scroll",function(){3==currentTab&&(scrollObj.scrollLeft=topObj.scrollLeft)}),scrollObj.addEventListener("mouseover",function(){currentTab=1}),leftObj.addEventListener("mouseover",function(){currentTab=2}),topObj.addEventListener("mouseover",function(){currentTab=3}),scrollObj.addEventListener("touchmove",function(){currentTab=1}),leftObj.addEventListener("touchmove",function(){currentTab=2}),topObj.addEventListener("touchmove",function(){currentTab=3})}}}).directive("dxTabs",function(){return{restrict:"A",link:function(scope,element){getByEle(element[0]).addClass("datax-tabs").addClass("datax-tabs-top").addClass("datax-tabs-card")}}}).directive("dxTabBody",function(){return{restrict:"A",link:function(scope,element){getByEle(element[0]).addClass("datax-tabs-content").addClass("datax-tabs-top-content");for(var e=getByEle(element[0]).children(),t=0;t<e.length;t++){var a=getByEle(e[t]);a.addClass("datax-tabs-tabpane"),t<1?a.addClass("datax-tabs-tabpane-active"):a.addClass("datax-tabs-tabpane-inactive")}}}}).directive("dxTabHeader",["$document",function($document){return{restrict:"A",replace:!0,scope:{titles:"=",dxLabel:"=?dxLabel",dxChange:"&"},template:'<div class="datax-tabs-bar datax-tabs-card-bar datax-tabs-top-bar datax-tabs-default-bar">            <div class="datax-tabs-nav-container">                <span class="datax-tabs-tab-prev"></span>                <span class="datax-tabs-tab-next"></span>                <div class="datax-tabs-nav-wrap">                    <div class="datax-tabs-nav-scroll">                        <div class="datax-tabs-nav" style="transform: translate3d(0px, 0px, 0px);">                            <div>                                <div role="tab" class="datax-tabs-tab" ng-repeat="item in tabs"                                ng-click="checkTab(item)" ng-class="{\'datax-tabs-tab-active\':item[\'show\']}">                                {{ item.label }}</div>                            </div>                        </div>                    </div>                </div>            </div>        </div>',controller:function($scope,$element){var vm=$scope;vm.dxChange||(vm.dxChange=function(e){}),vm.tabs=[],vm.checkTab=function(e){vm.tabs.forEach(function(t){t.index+""==e.index+""?t.show=!0:t.show=!1});for(var t=getByEle($element[0].parentElement.querySelector(".datax-tabs-content")).children(),a=0;a<t.length;a++){var l=getByEle(t[a]);l.removeClass("datax-tabs-tabpane-active").removeClass("datax-tabs-tabpane-inactive"),a+""==e.index+""?l.addClass("datax-tabs-tabpane-active"):l.addClass("datax-tabs-tabpane-inactive")}vm.dxChange({tabIndex:e.index,tabLabel:e.label})},vm.$watch("titles",function(e){isNotNull(e)&&e.length>0&&(vm.tabs=[],e.forEach(function(e,t){var a="";a=e,vm.dxLabel&&(a=e[vm.dxLabel]),vm.tabs.push({label:a,index:t,show:!1})}),vm.tabs[0].show=!0)})}}}]).directive("dxModal",["dom",function(dom){return{restrict:"AE",replace:!0,scope:{title:"@",msg:"=?msg",type:"@",cancelCallback:"&",okCallback:"&"},template:'<div role="dialog" tabindex="-1" class="datax-modal-wrap " style="z-index: 1000;">            <div role="document" class="datax-modal" style="min-width: 320px; max-width: 320px; transform-origin: -125.984px 180.563px 0px;">                <div class="datax-modal-content">                    <div ng-show="title" class="datax-modal-header ">                        <div class="datax-modal-title">                            <div class="">{{ title }}</div>                        </div>                    </div>                    <div class="datax-modal-body " >                        {{ msg }}                    </div>                    <div class="datax-modal-footer ">                        <button ng-show="type==\'confirm\'" class="datax-btn  datax-btn-default" >                            <span> 取消 </span>                        </button>                        <button class="datax-btn  datax-btn-primary" ng-click="onOK()">                            <span> 确定 </span>                        </button>                    </div>                </div>            </div>        </div>',link:function(scope,element,attrs){scope.type,scope.onOK=function(){scope.okCallback&&scope.okCallback(),scope.cancelModal()},scope.cancelModal=function(){getByEle(document.querySelector(".cdk-overlay-container")).remove()}}}}])})();